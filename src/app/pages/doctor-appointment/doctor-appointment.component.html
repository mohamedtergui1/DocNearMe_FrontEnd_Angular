<app-layout>
    <div class="p-4" selector>
        <app-floating-configurator />
        <h1 class="text-xl font-bold mb-4">Appointment Scheduler - {{ clinic?.clinicName }}</h1>

        <!-- FullCalendar Component -->
        <div style="70vh" class="py-12 overflow-y-scroll ">
            <full-calendar [options]="calendarOptions"></full-calendar>
        </div>

        <!-- Create Appointment Dialog -->
        <p-dialog header="Create Appointment" [(visible)]="displayAppointmentDialog" [modal]="true" [style]="{ width: '650px' }" [draggable]="false" [resizable]="false">
            <form (ngSubmit)="createAppointment()">
                <div class="p-fluid">
                    <div class="p-field">
                        <label for="subject">Subject</label>
                        <input id="subject" type="text" pInputText [(ngModel)]="newAppointment.subject" name="subject" required />
                    </div>
                </div>
                <div class="p-dialog-footer">
                    <button type="button" pButton label="Cancel" icon="pi pi-times" (click)="displayAppointmentDialog = false" class="p-button-text"></button>
                    <button type="submit" pButton label="Save" icon="pi pi-check" class="p-button-success"></button>
                </div>
            </form>
        </p-dialog>

        <!-- Edit Appointment Dialog -->
        <p-dialog (onHide)="cancelEdit()" header="Edit Appointment" [(visible)]="displayEditAppointmentDialog" [modal]="true" [style]="{ width: '650px' }" [draggable]="false" [resizable]="false">
            <form (ngSubmit)="updateAppointment()">
                <div class="p-fluid">
                    <div class="p-field">
                        <label for="editSubject">Subject</label>
                        <input id="editSubject" type="text" pInputText [(ngModel)]="selectedAppointment.subject" name="editSubject" required />
                    </div>
                </div>
                <div class="p-dialog-footer">
                    <button type="button" pButton label="Delete" icon="pi pi-trash" (click)="deleteAppointment()" class="p-button-danger"></button>
                    <button type="button" pButton label="Cancel" icon="pi pi-times" (click)="cancelEdit()" class="p-button-text"></button>
                    <button type="submit" pButton label="Save" icon="pi pi-check" class="p-button-success"></button>
                </div>
            </form>
        </p-dialog>
    </div>
</app-layout>